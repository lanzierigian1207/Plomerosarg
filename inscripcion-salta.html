<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Inscripcion Salta 6/6 | Encuentros</title>
  <style>
    :root {
      --ink: #0f2f57;
      --bg: #dff1ff;
      --card: #ffffff;
      --line: #dbe6f2;
      --accent: #0d63c7;
    }

    * {
      box-sizing: border-box;
      margin: 0;
    }

    body {
      font-family: "Barlow", sans-serif;
      color: var(--ink);
      background-color: var(--bg);
      line-height: 1.5;
      padding: 32px 20px;
    }

    .wrap {
      max-width: 960px;
      margin: 0 auto;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 28px;
    }

    h1 {
      font-size: clamp(2rem, 4vw, 2.75rem);
      margin-bottom: 8px;
    }

    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 18px;
      margin-bottom: 20px;
    }

    .header-copy {
      min-width: 0;
    }

    .intro {
      color: #335a86;
      margin-bottom: 0;
    }

    .header-logo {
      flex: 0 0 auto;
      width: 128px;
      height: 128px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: #f9fbfe;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 6px;
    }

    .header-logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    form {
      display: grid;
      gap: 14px;
    }

    .field {
      display: grid;
      gap: 6px;
    }

    label {
      font-weight: 700;
    }

    label.required::after {
      content: " *";
      color: #d93025;
      font-size: 0.72em;
      vertical-align: super;
    }

    input:not([type="checkbox"]),
    select {
      width: 100%;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px 12px;
      font: inherit;
      color: var(--ink);
      background: #ffffff;
    }

    .consent {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 12px;
      background: #f9fbfe;
    }

    .consent input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-top: 3px;
      cursor: pointer;
    }

    .consent label {
      font-weight: 500;
      font-size: 0.96rem;
      color: #2a4f79;
      line-height: 1.45;
      cursor: pointer;
    }

    .actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 8px;
    }

    .success-message {
      display: none;
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid #95d5a5;
      background: #e8f8ec;
      color: #1d6f35;
      font-weight: 700;
    }

    .success-message.error {
      border-color: #f0b5b0;
      background: #fdebea;
      color: #9c2a24;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 16px;
      border-radius: 10px;
      border: 1px solid transparent;
      text-decoration: none;
      font-weight: 700;
      cursor: pointer;
    }

    .btn-primary {
      background: var(--accent);
      color: #ffffff;
    }

    .btn-secondary {
      background: #ffffff;
      color: var(--accent);
      border-color: var(--accent);
    }

    @media (max-width: 680px) {
      .header-row {
        flex-direction: column;
      }

      .header-logo {
        width: 108px;
        height: 108px;
      }
    }
  </style>
</head>
<body>
  <main class="wrap">
    <div class="header-row">
      <div class="header-copy">
        <h1>Inscripcion - Salta 6/6</h1>
        <p class="intro">Complet&aacute; el formulario para reservar tu lugar en Salta 6/6.</p>
      </div>
      <div class="header-logo">
        <img src="/Prueba_2/assets/logo-plomeros-circular.png" alt="Logo Plomeros Sanitaristas Argentinos">
      </div>
    </div>

    <form id="inscripcionForm" action="guardar_inscripcion.php" method="post">
      <input type="hidden" id="encuentro" name="encuentro" value="Salta 6/6">
      <div class="field">
        <label class="required" for="dni">DNI</label>
        <input id="dni" name="dni" type="text" required>
      </div>

      <div class="field">
        <label class="required" for="nombre_apellido">Nombre y Apellido</label>
        <input id="nombre_apellido" name="nombre_apellido" type="text" required>
      </div>

      <div class="field">
        <label class="required" for="mail">Mail</label>
        <input id="mail" name="mail" type="email" required>
      </div>

      <div class="field">
        <label class="required" for="provincia">De que provincia sos</label>
        <select id="provincia" name="provincia" required>
          <option value="">Seleccionar</option>
          <option value="buenos_aires">Buenos Aires</option>
          <option value="caba">Ciudad Autonoma de Buenos Aires</option>
          <option value="catamarca">Catamarca</option>
          <option value="chaco">Chaco</option>
          <option value="chubut">Chubut</option>
          <option value="cordoba">Cordoba</option>
          <option value="corrientes">Corrientes</option>
          <option value="entre_rios">Entre Rios</option>
          <option value="formosa">Formosa</option>
          <option value="jujuy">Jujuy</option>
          <option value="la_pampa">La Pampa</option>
          <option value="la_rioja">La Rioja</option>
          <option value="mendoza">Mendoza</option>
          <option value="misiones">Misiones</option>
          <option value="neuquen">Neuquen</option>
          <option value="rio_negro">Rio Negro</option>
          <option value="salta">Salta</option>
          <option value="san_juan">San Juan</option>
          <option value="san_luis">San Luis</option>
          <option value="santa_cruz">Santa Cruz</option>
          <option value="santa_fe">Santa Fe</option>
          <option value="santiago_del_estero">Santiago del Estero</option>
          <option value="tierra_del_fuego">Tierra del Fuego</option>
          <option value="tucuman">Tucuman</option>
        </select>
      </div>

      <div class="field">
        <label for="localidad">De que Localidad sos</label>
        <input id="localidad" name="localidad" type="text" placeholder="(Opcinal)">
      </div>

      <div class="field">
        <label class="required" for="asociado">Es asociado a AAPSYA</label>
        <select id="asociado" name="asociado" required>
          <option value="">Seleccionar</option>
          <option value="si">Si</option>
          <option value="no">No</option>
        </select>
      </div>

      <div class="field">
        <label class="required" for="profesion">Profesion</label>
        <select id="profesion" name="profesion" required>
          <option value="">Seleccionar</option>
          <option value="oficial_plomero">Oficial Plomero</option>
          <option value="ayudante_plomero">Ayudante de Plomero</option>
          <option value="medio_oficial_plomero">Medio Oficial Plomero</option>
          <option value="maestro_mayor_obra">Maestro Mayor de Obra</option>
          <option value="arquitecto_ingeniero">Arquitecto/Ingeniero</option>
          <option value="estudiante_centro_formacion">Estudiante de centro de Formacion</option>
          <option value="otros">Otros</option>
        </select>
      </div>

      <div class="field">
        <label class="required" for="origen">Donde nos conociste</label>
        <select id="origen" name="origen" required>
          <option value="">Seleccionar</option>
          <option value="facebook">Grupo de Facebook</option>
          <option value="instagram">Instagram de Plomeros</option>
          <option value="casa_sanitarios">Casa de Sanitarios</option>
          <option value="centro_formacion">Centro de Formacion</option>
        </select>
      </div>

      <div class="consent">
        <input id="acepto_terminos" name="acepto_terminos" type="checkbox" required>
        <label class="required" for="acepto_terminos">Confirmo que mis datos son verdaderos. Al inscribirme acepto que se envien mis datos a los sponsor y ademas acepto que los sponsors y/o los organizadores utilicen mi imagen, parcial o total, para hacer publicidad. La presente autorizacion y cesion de mi imagen es a titulo gratuito y concedida por tiempo ilimitado.</label>
      </div>

      <div class="actions">
        <button class="btn btn-primary" type="submit">Enviar</button>
        <a class="btn btn-secondary" href="encuentros.html">Volver a Encuentros</a>
      </div>
      <p class="success-message" id="successMessage" role="status">Gracias por la Inscripci&oacute;n, en breve les llegar&aacute; la informaci&oacute;n.</p>
    </form>
  </main>
  <script>
    const form = document.getElementById("inscripcionForm");
    const successMessage = document.getElementById("successMessage");

    form.addEventListener("submit", async function (event) {
      event.preventDefault();
      successMessage.style.display = "none";
      successMessage.classList.remove("error");

      const formData = new FormData(form);
      const payload = {
        encuentro: String(formData.get("encuentro") || "").trim(),
        dni: String(formData.get("dni") || "").trim(),
        nombre_apellido: String(formData.get("nombre_apellido") || "").trim(),
        mail: String(formData.get("mail") || "").trim(),
        provincia: String(formData.get("provincia") || "").trim(),
        localidad: String(formData.get("localidad") || "").trim(),
        asociado: String(formData.get("asociado") || "").trim(),
        profesion: String(formData.get("profesion") || "").trim(),
        origen: String(formData.get("origen") || "").trim(),
        acepto_terminos: formData.get("acepto_terminos") ? "si" : ""
      };

      try {
        const response = await fetch("guardar_inscripcion.php", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(payload)
        });

        let data = {};
        try {
          data = await response.json();
        } catch (jsonError) {
          data = {};
        }

        if (!response.ok || !data.ok) {
          throw new Error(data.error || "No fue posible guardar la inscripcion.");
        }

        successMessage.textContent = "Gracias por la Inscripcion, en breve les llegara la informacion.";
        successMessage.style.display = "block";
        form.reset();
      } catch (error) {
        successMessage.textContent = `Error: ${error.message}`;
        successMessage.classList.add("error");
        successMessage.style.display = "block";
      }
    });
  </script>
</body>
</html>

